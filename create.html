<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Create Potluck</title>
  <link rel="stylesheet" href="style.css?v=4" />
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js?v=4"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js?v=4"></script>
</head>
<body>
  <div class="container">
    <h1>ğŸ‰ Create Potluck</h1>
    <input type="text" id="new-event-name" placeholder="Event Name" />
    <select id="new-theme">
      <option value="birthday">ğŸ‚ Birthday</option>
      <option value="christmas">ğŸ„ Christmas</option>
      <option value="halloween">ğŸƒ Halloween</option>
      <option value="valentines">â¤ï¸ Valentines</option>
      <option value="diwali">ğŸª” Diwali</option>
      <option value="thanksgiving">ğŸ¦ƒ Thanksgiving</option>
      <option value="newyear">ğŸ† New Year</option>
      <option value="easter">ğŸ° Easter</option>
      <option value="bbq">ğŸ” BBQ</option>
      <option value="beach">ğŸ–ï¸ Beach</option>
      <option value="wedding">ğŸ’’ Wedding</option>
      <option value="babyshower">ğŸ‘¶ Baby Shower</option>
      <option value="graduation">ğŸ“ Graduation</option>
      <option value="superbowl">ğŸˆ Super Bowl</option>
      <option value="cinco">ğŸŒ® Cinco</option>
      <option value="pride">ğŸŒˆ Pride</option>
      <option value="ramadan">ğŸŒ™ Ramadan</option>
      <option value="hanukkah">ğŸ• Hanukkah</option>
      <option value="autumn">ğŸ‚ Autumn</option>
      <option value="spring">ğŸŒ¸ Spring</option>
    </select>
    <button onclick="createPotluckEvent()">Create & Get Link</button>
    <p id="share-link"></p>
    <p><a href="index.html">Back to App</a></p>
  </div>

  <script>
    // Initialize Firebase for create page
    const firebaseConfig = {
      apiKey: "AIzaSyCzvH64kpIcpgUrjxVsJBhF9SxME7pVCyQ",
      authDomain: "potluck-planner-15a68.firebaseapp.com",
      databaseURL: "https://potluck-planner-15a68-default-rtdb.firebaseio.com",
      projectId: "potluck-planner-15a68",
      storageBucket: "potluck-planner-15a68.firebasestorage.app",
      messagingSenderId: "209595251975",
      appId: "1:209595251975:web:961acb493b364e9fedd9a2",
      measurementId: "G-VQKX9HP4SM"
    };
    
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    
    function createPotluckEvent() {
      const name = document.getElementById('new-event-name').value || 'Potluck';
      const theme = document.getElementById('new-theme').value;
      const id = Date.now().toString(36).toUpperCase();
      const url = `${location.origin}/Potluck_planner/index.html?code=${id}`;
      db.ref(`events/${id.toLowerCase()}`).set({ 
        createdAt: Date.now(),
        createdBy: 'Anonymous',
        theme: theme,
        name: name
      });
      document.getElementById('share-link').innerHTML = `Share: <a href="${url}" target="_blank">${url}</a><br><button onclick="navigator.clipboard.writeText('${url}'); alert('Copied!')">Copy Link</button>`;
    }
  </script>
</body>
</html>